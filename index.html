<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Villa Gaia | Luxury Estate - Leuca</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- VARIABLES & RESET --- */
        :root {
            --black: #0a0a0a;
            --charcoal: #1a1a1a;
            --dark-gray: #2d2d2d;
            --medium-gray: #666;
            --light-gray: #f9f9f9;
            --white: #ffffff;
            --gold: #c9a962;
            --gold-light: #e0c78a;
            --gold-dim: rgba(201, 169, 98, 0.2);
            --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            --shadow-soft: 0 10px 30px rgba(0,0,0,0.05);
            --shadow-luxury: 0 20px 60px rgba(0,0,0,0.15);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html { scroll-behavior: smooth; font-size: 16px; }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--white);
            color: var(--charcoal);
            line-height: 1.7;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        h1, h2, h3, h4 { 
            font-family: 'Playfair Display', serif; 
            font-weight: 600;
            letter-spacing: -0.02em;
            line-height: 1.2;
        }

        a { text-decoration: none; transition: var(--transition); }
        ul { list-style: none; }
        img { max-width: 100%; display: block; }
        button, select, input { font-family: inherit; }

        /* --- CUSTOM TOAST NOTIFICATIONS --- */
        #toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            background: var(--white);
            color: var(--charcoal);
            padding: 1rem 1.5rem;
            border-left: 4px solid var(--gold);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            border-radius: 4px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideInRight 0.4s ease forwards;
            min-width: 300px;
        }

        .toast.error { border-left-color: #d9534f; }
        .toast.success { border-left-color: #5cb85c; }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes fadeOut {
            to { opacity: 0; transform: translateX(20px); }
        }

        /* --- NAVIGATION --- */
        nav { 
            position: fixed; 
            top: 0; 
            width: 100%; 
            background: transparent;
            z-index: 1000; 
            padding: 1.5rem 5%;
            transition: var(--transition);
        }

        nav.scrolled {
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(15px);
            padding: 1rem 5%;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .nav-container { 
            max-width: 1400px; 
            margin: 0 auto; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            position: relative;
        }

        .logo { 
            font-family: 'Playfair Display', serif; 
            font-size: 1.8rem; 
            color: var(--white); 
            font-weight: 700; 
            letter-spacing: 2px;
            text-transform: uppercase;
            z-index: 1002;
        }

        .logo span { color: var(--gold); font-weight: 400; font-style: italic; }

        .nav-links { 
            display: flex; 
            gap: 2.5rem; 
            z-index: 1002;
        }

        .nav-links a { 
            color: rgba(255,255,255,0.85); 
            font-weight: 400; 
            font-size: 0.85rem; 
            text-transform: uppercase; 
            letter-spacing: 1.5px;
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-links a::after { 
            content: ''; 
            position: absolute; 
            bottom: 0; 
            left: 0; 
            width: 0; 
            height: 1px; 
            background: var(--gold); 
            transition: var(--transition); 
        }

        .nav-links a:hover { color: var(--gold); }
        .nav-links a:hover::after { width: 100%; }

        /* --- LANGUAGE SWITCHER (Dropdown) --- */
        .language-switcher {
            position: relative;
            display: inline-block;
            margin-left: auto;
            z-index: 1005;
        }

        .current-lang {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--white);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            padding: 5px 10px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 4px;
            transition: var(--transition);
        }

        .current-lang:hover {
            background: rgba(255,255,255,0.1);
            border-color: var(--gold);
            color: var(--gold);
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--white);
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            box-shadow: var(--shadow-luxury);
            padding: 0.5rem 0;
            display: none; /* Hidden by default */
            flex-direction: column;
            min-width: 150px;
            margin-top: 10px;
            overflow: hidden;
        }

        .lang-dropdown.active {
            display: flex;
        }

        .lang-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--charcoal);
            transition: var(--transition);
        }

        .lang-option:hover {
            background: var(--light-gray);
            color: var(--gold);
        }

        /* Mobile Menu Toggle */
        .hamburger {
            display: none;
            cursor: pointer;
            z-index: 1002;
            color: var(--white);
            font-size: 1.5rem;
        }

        /* --- HERO SECTION --- */
        .hero { 
            height: 100vh; 
            
            /* IMMAGINE HOME LEUCA DI NOTTE */
            background: linear-gradient(rgba(10,10,10,0.3), rgba(10,10,10,0.6)), 
                        url('https://z-cdn-media.chatglm.cn/files/2ce8bd4a-5c1e-44c3-b532-394bf74dab08.png?auth_key=1869979172-a42c1f8b275941d7acc1cbf2676e583d-0-a7f07d8bf0061fa777a44daf0afcafc8') center/cover no-repeat fixed; 
            
            display: flex; 
            align-items: center; 
            justify-content: center; 
            text-align: center; 
            color: var(--white); 
            position: relative;
            overflow: hidden;
        }

        .hero-content { 
            position: relative;
            z-index: 2; 
            max-width: 900px;
            padding: 0 2rem;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1.2s cubic-bezier(0.2, 1, 0.3, 1) forwards;
        }

        .hero-subtitle {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 5px;
            color: var(--gold);
            margin-bottom: 1.5rem;
            display: block;
        }

        .hero-content h1 { 
            font-size: clamp(3rem, 8vw, 6rem);
            margin-bottom: 1.5rem; 
            font-weight: 600;
            text-shadow: 0 4px 30px rgba(0,0,0,0.4);
        }

        .hero-content p { 
            font-size: 1.4rem; 
            font-weight: 300; 
            font-family: 'Playfair Display', serif;
            font-style: italic;
            margin-bottom: 3rem;
            opacity: 0.9;
        }

        .hero-cta { display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap; }

        .btn-primary {
            background: transparent;
            color: var(--white);
            border: 1px solid var(--gold);
            padding: 1rem 2.5rem;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2.5px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 0%; height: 100%;
            background: var(--gold);
            z-index: -1;
            transition: var(--transition);
        }

        .btn-primary:hover { color: var(--black); border-color: var(--gold); }
        .btn-primary:hover::before { width: 100%; }

        .btn-secondary {
            background: var(--white);
            color: var(--charcoal);
            padding: 1rem 2.5rem;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2.5px;
            font-weight: 500;
            border: 1px solid var(--white);
        }

        .btn-secondary:hover { background: transparent; color: var(--white); }

        .scroll-indicator { 
            position: absolute; 
            bottom: 40px; 
            left: 50%; 
            transform: translateX(-50%); 
            color: var(--white); 
            font-size: 1.5rem; 
            animation: bounce 2.5s infinite;
            cursor: pointer;
            opacity: 0.7;
        }

        /* --- SECTIONS GENERAL --- */
        section { padding: 6rem 5%; max-width: 1400px; margin: 0 auto; position: relative; }
        
        .section-header {
            text-align: center;
            margin-bottom: 4rem;
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s ease;
        }

        .section-header.visible { opacity: 1; transform: translateY(0); }

        .section-subtitle-lg {
            font-family: 'Inter', sans-serif;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 4px;
            color: var(--gold);
            margin-bottom: 1rem;
            display: block;
        }

        .section-title { 
            font-size: clamp(2.2rem, 5vw, 3.5rem);
            color: var(--charcoal); 
            margin-bottom: 1rem;
        }

        .section-header p {
            color: var(--medium-gray);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
            font-weight: 300;
        }

        .dark-section {
            background: var(--charcoal);
            color: var(--white);
            max-width: 100%;
            padding: 7rem 5%;
        }

        .dark-section .section-title { color: var(--white); }
        .dark-section .section-header p { color: rgba(255,255,255,0.6); }

        /* --- ABOUT LUXURY GRID --- */
        .about-grid { display: grid; grid-template-columns: 1fr 1.1fr; gap: 5rem; align-items: center; }
        .about-text h3 { font-size: 2.2rem; margin-bottom: 1.5rem; color: var(--charcoal); }
        .about-text p { color: var(--medium-gray); margin-bottom: 1.5rem; font-weight: 300; }

        .feature-list {
            margin-top: 2rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .feature-list li { display: flex; align-items: center; gap: 0.8rem; color: var(--charcoal); font-size: 0.95rem; }
        .feature-list i { color: var(--gold); }

        .villa-photo-container { 
            position: relative; 
            overflow: hidden;
            box-shadow: var(--shadow-luxury);
        }

        .villa-photo-container img { width: 100%; transition: transform 1.2s ease; }
        .villa-photo-container:hover img { transform: scale(1.05); }

        .villa-badge { 
            position: absolute; 
            bottom: 0; left: 0; right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            color: var(--white); 
            padding: 3rem 2rem 1.5rem; 
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
        }

        .villa-badge span {
            display: block;
            font-family: 'Inter', sans-serif;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--gold);
            margin-bottom: 0.5rem;
        }

        /* --- SPACES --- */
        .spaces-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }

        .space-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 3rem 2rem;
            transition: var(--transition);
        }

        .space-card:hover { background: rgba(255,255,255,0.05); border-color: var(--gold); transform: translateY(-5px); }

        .space-card h3 { color: var(--white); font-size: 1.5rem; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 1rem; }
        .space-card h3 i { color: var(--gold); }
        
        /* NUOVO STILE PER IL SOTTOTITOLO DEL LIVELLO */
        .level-subtitle {
            color: var(--gold);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-top: -0.2rem;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .room-list li { 
            padding: 0.8rem 0; 
            border-bottom: 1px solid rgba(255,255,255,0.1); 
            color: rgba(255,255,255,0.8);
            font-size: 0.95rem;
            display: flex; gap: 1rem;
        }
        .room-list li i { color: var(--gold); margin-top: 4px; }

        /* --- NEW DESCRIPTION SECTION --- */
        .description-highlight {
            background: var(--light-gray);
            text-align: center;
            padding: 8rem 10%;
            position: relative;
        }

        .description-highlight::before {
            content: '';
            position: absolute;
            top: 0; left: 50%;
            transform: translateX(-50%);
            width: 1px; height: 80px;
            background: var(--gold);
        }

        .desc-content {
            max-width: 900px;
            margin: 0 auto;
        }

        .desc-quote {
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 2rem;
            font-family: 'Playfair Display', serif;
        }

        .desc-text {
            font-size: 1.2rem;
            line-height: 1.9;
            color: var(--charcoal);
            font-weight: 300;
            margin-bottom: 2rem;
            font-family: 'Playfair Display', serif;
        }

        .desc-features {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 3rem;
            flex-wrap: wrap;
        }

        .desc-feat-item {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .desc-feat-item i {
            font-size: 1.5rem;
            color: var(--gold);
            border: 1px solid var(--gold);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .desc-feat-item span {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--medium-gray);
        }

        /* --- CALENDAR & TARIFFE --- */
        .tariffe { background: var(--white); padding-top: 4rem; }

        .calendar-luxury {
            background: var(--white);
            padding: 2rem;
            box-shadow: var(--shadow-luxury);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
        
        .calendar-btn { 
            background: transparent; color: var(--charcoal); border: 1px solid #ddd;
            width: 40px; height: 40px; border-radius: 50%; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: var(--transition);
        }

        .calendar-btn:hover { background: var(--charcoal); color: var(--white); border-color: var(--charcoal); }

        .calendar-grid { 
            display: grid; 
            grid-template-columns: repeat(7, 1fr); 
            gap: 1px; 
            background: #eee; 
            border: 1px solid #eee;
        }

        .calendar-day-header { 
            background: var(--charcoal); color: var(--white); padding: 1rem; 
            text-align: center; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px;
        }

        .calendar-day { 
            background: var(--white); min-height: 100px; padding: 0.8rem;
            cursor: pointer; transition: var(--transition); display: flex; flex-direction: column; justify-content: space-between;
        }

        .calendar-day:hover:not(.disabled):not(.closed) { background: var(--charcoal); }
        .calendar-day:hover:not(.disabled):not(.closed) * { color: var(--white) !important; }

        .calendar-day.disabled { background: #fafafa; color: #ccc; cursor: default; }
        .calendar-day.closed { background: #f0f0f0; color: #aaa; cursor: default; }
        
        .calendar-day.selected { background: var(--gold) !important; color: var(--black) !important; }
        .calendar-day.selected .calendar-day-number { font-weight: 700; }
        
        .calendar-day.checkin, .calendar-day.checkout { background: var(--charcoal) !important; color: var(--white) !important; }
        .calendar-day.in-range { background: var(--gold-light); }

        .calendar-day-number { font-weight: 500; font-size: 0.95rem; color: var(--charcoal); }
        .calendar-day-price { font-size: 0.8rem; color: var(--gold); font-weight: 600; }
        .closed .calendar-day-price { color: #aaa; font-size: 0.7rem; }

        /* --- MODIFIED SELECTION INFO (CALCOLO IMPORTO) --- */
        .selection-info {
            background: var(--white); 
            padding: 3rem; 
            box-shadow: var(--shadow-luxury);
            margin-top: 2rem; 
            border: 1px solid var(--gold); 
            border-radius: 8px;
        }

        .selection-dates {
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px solid var(--light-gray); padding-bottom: 2rem;
        }

        .date-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 2px; color: var(--medium-gray); }
        .date-value { font-family: 'Playfair Display', serif; font-size: 2rem; color: var(--charcoal); font-weight: 600; }
        .date-nights { background: var(--charcoal); color: var(--gold); padding: 0.5rem 1.5rem; font-weight: 600; font-size: 0.8rem; letter-spacing: 1px; }

        .price-breakdown { 
            background: var(--light-gray); 
            padding: 2rem; 
            margin: 2rem 0; 
            border-radius: 8px; 
            border: 1px solid rgba(0,0,0,0.05);
        }

        .price-row { 
            display: flex; justify-content: space-between; 
            margin-bottom: 1rem; 
            font-size: 1rem; 
            color: var(--charcoal);
        }

        .price-row.total { 
            border-top: 2px solid var(--gold); 
            padding-top: 1.5rem; 
            margin-top: 1rem; 
            font-size: 1.5rem; 
            font-weight: 700; 
            color: var(--black); 
            font-family: 'Playfair Display', serif; 
        }
        
        /* Stile specifico per la riga Caparra */
        .price-row.deposit-row {
            background-color: rgba(201, 169, 98, 0.1); /* Sfondo dorato molto chiaro */
            padding: 10px;
            border-radius: 4px;
            font-weight: 600;
        }

        .deposit-note {
            font-size: 0.8rem; 
            color: var(--medium-gray); 
            line-height: 1.4; 
            margin-top: 0.5rem; 
            font-style: italic;
            display: block;
        }

        .discount { color: #d9534f; }
        
        .tax-note {
            font-size: 0.85rem; 
            color: var(--medium-gray); 
            font-style: italic; 
            text-align: right; 
            margin-top: 0.5rem;
        }

        /* --- GALLERY --- */
        .gallery-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; }
        .gallery-item { position: relative; overflow: hidden; aspect-ratio: 1/1; cursor: pointer; }
        .gallery-item:nth-child(2) { grid-row: span 2; aspect-ratio: auto; }
        
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.8s ease; filter: brightness(0.9); }
        .gallery-item:hover img { transform: scale(1.1); filter: brightness(1); }
        
        .gallery-overlay {
            position: absolute; inset: 0; background: rgba(0,0,0,0.3);
            display: flex; align-items: center; justify-content: center;
            opacity: 0; transition: var(--transition);
        }
        .gallery-item:hover .gallery-overlay { opacity: 1; }
        .gallery-overlay i { color: var(--white); font-size: 2rem; background: var(--gold); width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 50%; }

        /* --- REVIEWS SECTION --- */
        .reviews-section {
            background: var(--light-gray);
            padding: 7rem 5%;
        }
        
        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .review-card {
            background: var(--white);
            padding: 2.5rem;
            border-radius: 8px;
            box-shadow: var(--shadow-soft);
            transition: var(--transition);
            position: relative;
        }

        .review-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-luxury);
        }

        .review-stars {
            color: var(--gold);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .review-text {
            font-style: italic;
            color: var(--medium-gray);
            margin-bottom: 1.5rem;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .review-author {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .review-avatar {
            width: 50px;
            height: 50px;
            background: var(--gold-dim);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gold);
            font-weight: 700;
            font-size: 1.2rem;
        }

        .review-info h4 {
            font-size: 1rem;
            color: var(--charcoal);
            margin-bottom: 0.2rem;
        }

        .review-info span {
            font-size: 0.8rem;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* --- TERMS --- */
        .terms-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; }
        .terms-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); padding: 2.5rem; }
        .terms-card h3 { color: var(--white); font-size: 1.2rem; margin-bottom: 1.5rem; display: flex; gap: 0.8rem; align-items: center; }
        .terms-card h3 i { color: var(--gold); }
        .terms-card li { padding: 0.8rem 0; color: rgba(255,255,255,0.7); font-size: 0.9rem; border-bottom: 1px solid rgba(255,255,255,0.1); }

        /* --- CONTACT --- */
        .contact-grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: start;
        }

        .contact-info-box {
            background: var(--white);
            padding: 3rem;
            box-shadow: var(--shadow-luxury);
            height: 100%;
        }

        .contact-form { background: var(--white); padding: 3rem; box-shadow: var(--shadow-luxury); }
        .form-group { margin-bottom: 1.5rem; position: relative; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1.5px; color: var(--medium-gray); }
        
        .form-group input, .form-group textarea, .form-group select {
            width: 100%; padding: 1rem 0; border: none; border-bottom: 1px solid #ddd;
            font-size: 1rem; transition: var(--transition); background: transparent;
        }
        
        .form-group input:focus, .form-group textarea:focus {
            outline: none; border-bottom-color: var(--gold);
        }

        .submit-btn {
            background: var(--charcoal); color: var(--white); border: none;
            padding: 1.2rem 3rem; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px;
            cursor: pointer; transition: var(--transition); width: 100%; font-weight: 500;
            margin-top: 1rem;
        }
        
        .submit-btn:hover { background: var(--gold); color: var(--charcoal); }

        /* --- FOOTER --- */
        footer { 
            background: var(--black); 
            color: var(--white); 
            padding: 5rem 5% 2rem; 
            text-align: center; 
            border-top: 3px solid var(--gold); 
            position: relative;
        }

        .footer-logo { font-family: 'Playfair Display', serif; font-size: 2rem; margin-bottom: 1rem; }
        .footer-logo span { color: var(--gold); font-style: italic; }
        
        .social-links { margin: 2rem 0; display: flex; justify-content: center; gap: 1.5rem; }
        .social-links a {
            width: 45px; height: 45px; border: 1px solid rgba(255,255,255,0.2);
            display: flex; align-items: center; justify-content: center; border-radius: 50%;
            transition: var(--transition);
        }
        .social-links a:hover { background: var(--gold); color: var(--black); border-color: var(--gold); transform: translateY(-3px); }
        .footer-bottom { margin-top: 3rem; font-size: 0.8rem; color: rgba(255,255,255,0.4); }

        /* --- VISITOR COUNTER --- */
        .visitor-counter {
            position: absolute;
            bottom: 2rem;
            left: 5%;
            background: rgba(255,255,255,0.05);
            padding: 0.8rem 1.2rem;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.8rem;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(5px);
        }

        .visitor-dot {
            width: 8px;
            height: 8px;
            background-color: #2ecc71;
            border-radius: 50%;
            box-shadow: 0 0 5px #2ecc71;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 5px rgba(46, 204, 113, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(46, 204, 113, 0); }
        }

        /* --- ANIMATIONS --- */
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translate(-50%, 0); } 40% { transform: translate(-50%, -10px); } 60% { transform: translate(-50%, -5px); } }

        .reveal { opacity: 0; transform: translateY(40px); transition: all 1s ease; }
        .reveal.active { opacity: 1; transform: translateY(0); }

        /* --- RESPONSIVE --- */
        @media (max-width: 968px) {
            .nav-links {
                position: fixed; top: 0; right: 0; height: 100vh;
                width: 70%; background: var(--charcoal); flex-direction: column;
                padding: 6rem 2rem; transform: translateX(100%); transition: transform 0.4s ease;
                box-shadow: -10px 0 30px rgba(0,0,0,0.3);
            }
            .nav-links.active { transform: translateX(0); }
            .hamburger { display: block; }
            
            .about-grid { grid-template-columns: 1fr; gap: 3rem; }
            .gallery-grid { grid-template-columns: 1fr; }
            .gallery-item:nth-child(2) { grid-row: span 1; aspect-ratio: auto; }
            
            .selection-dates { flex-direction: column; gap: 2rem; text-align: center; }
            .calendar-day { min-height: 70px; padding: 0.5rem; }
            .calendar-day-number { font-size: 0.85rem; }
            .calendar-day-price { font-size: 0.7rem; }
            
            .hero-content h1 { font-size: 3.5rem; }
            section { padding: 4rem 5%; }
            
            .description-highlight { padding: 5rem 5%; }
            .desc-text { font-size: 1rem; }

            .contact-grid-container { grid-template-columns: 1fr; }
            .contact-info-box { order: 2; }
            .contact-form { order: 1; }
            
            .visitor-counter {
                position: relative;
                bottom: auto;
                left: auto;
                margin: 2rem auto 0;
                width: fit-content;
            }
            
            /* Responsive Language Switcher */
            .language-switcher { display: flex; align-items: center; gap: 1rem; margin-right: auto; }
            .current-lang { font-size: 1.2rem; }
        }

    </style>
</head>
<body>

    <!-- Toast Container for Notifications -->
    <div id="toast-container"></div>

    <nav id="navbar">
        <div class="nav-container">
            <a href="#" class="logo">Villa <span>Gaia</span></a>
            <div class="hamburger" id="hamburger">
                <i class="fas fa-bars"></i>
            </div>
            <ul class="nav-links" id="nav-links">
                <!-- Aggiunto data-i18n a tutti i link del menu -->
                <li><a href="#villa" onclick="toggleMenu()">La Villa</a></li>
                <li><a href="#spazi" onclick="toggleMenu()">Gli Spazi</a></li>
                <li><a href="#esperienza" onclick="toggleMenu()">L'Esperienza</a></li>
                <li><a href="#tariffe" onclick="toggleMenu()">DisponibilitÃ </a></li>
                <li><a href="#recensioni" onclick="toggleMenu()">Recensioni</a></li>
                <li><a href="#condizioni" onclick="toggleMenu()">Condizioni</a></li>
                <li><a href="#contatti" onclick="toggleMenu()">Contatti</a></li>
            </ul>

            <!-- LANGUAGE SWITCHER -->
            <div class="language-switcher">
                <div class="current-lang" onclick="toggleDropdown()">
                    <span id="current-flag">ðŸ‡®ðŸ‡¹</span>
                    <i class="fas fa-chevron-down" style="font-size: 0.7rem;"></i>
                </div>
                <div class="lang-dropdown" id="langDropdown">
                    <div class="lang-option" onclick="changeLanguage('it')">ðŸ‡®ðŸ‡¹ Italiano</div>
                    <div class="lang-option" onclick="changeLanguage('en')">ðŸ‡¬ðŸ‡§ English</div>
                    <div class="lang-option" onclick="changeLanguage('fr')">ðŸ‡«ðŸ‡· FranÃ§ais</div>
                    <div class="lang-option" onclick="changeLanguage('de')">ðŸ‡©ðŸ‡ª Deutsch</div>
                </div>
            </div>
        </div>
    </nav>

    <section class="hero" id="home">
        <div class="hero-content">
            <!-- Aggiunto data-i18n -->
            <span class="hero-subtitle" data-i18n="hero_subtitle">Salento Experience</span>
            <h1 data-i18n="hero_title">Villa Gaia</h1>
            <p data-i18n="hero_text">Un'oasi di relax nel cuore del Salento</p>
            <div class="hero-cta">
                <a href="#tariffe" class="btn-primary" data-i18n="btn_check">Verifica DisponibilitÃ </a>
                <a href="#villa" class="btn-secondary" data-i18n="btn_discover">Scopri la Villa</a>
            </div>
        </div>
        <div class="scroll-indicator" onclick="document.getElementById('villa').scrollIntoView()">
            <i class="fas fa-chevron-down"></i>
        </div>
    </section>

    <section class="about" id="villa">
        <div class="section-header reveal">
            <!-- Aggiunto data-i18n -->
            <span class="section-subtitle-lg" data-i18n="sec_prop">La ProprietÃ </span>
            <h2 class="section-title" data-i18n="sec_prop_title">Una dimora esclusiva tra comfort e tranquillitÃ </h2>
            <!-- Aggiunto data-i18n -->
            <p data-i18n="sec_prop_desc">Situata in una tranquilla zona residenziale a soli 800 metri dal mare e dal centro di Leuca</p>
        </div>
        
        <div class="about-grid reveal">
            <div class="villa-photo-container">
                <img src="https://picsum.photos/seed/villagaia-garden/800/1000" alt="Villa Gaia - Giardino">
                <div class="villa-badge">
                    <!-- Aggiunto data-i18n -->
                    <span data-i18n="outdoor">Esterni</span>
                    Giardino Terrazzato 210mq
                </div>
            </div>
            <div class="about-text">
                <!-- Aggiunto data-i18n -->
                <h3 data-i18n="about_title">Il valore del relax: un rifugio di pace e serenitÃ </h3>
                <!-- Paragrafi dinamici con chiave 'data-key' -->
                <p class="dynamic-text" data-key="desc_about1">Villa Gaia Ã¨ stata concepita come un autentico rifugio dove il tempo sembra scorrere piÃ¹ lentamente. La posizione strategica garantisce la massima tranquillitÃ , mantenendo una comoda vicinanza a tutti i servizi.</p>
                <p class="dynamic-text" data-key="desc_about2">Il giardino terrazzato di 210 mq costituisce il vero cuore dell'esperienza: uno spazio verde privato dove godere delle serate salentine circondati dai profumi della macchia mediterranea.</p>
                
                <ul class="feature-list">
                    <li><i class="fas fa-ruler-combined"></i> 130 mq interni</li>
                    <li><i class="fas fa-tree"></i> 210 mq giardino esclusivo</li>
                    <li><i class="fas fa-car"></i> 3 posti auto privati</li>
                    <li><i class="fas fa-paw"></i> Pet friendly</li>
                    <li><i class="fas fa-users"></i> Fino a 8 ospiti</li>
                    <li><i class="fas fa-wifi"></i> Wi-Fi ad alta velocitÃ </li>
                </ul>
            </div>
        </div>
    </section>

    <section class="dark-section" id="spazi">
        <div class="section-header reveal">
            <!-- Aggiunto data-i18n -->
            <span class="section-subtitle-lg" data-i18n="sec_interni">Gli Interni</span>
            <h2 class="section-title" data-i18n="sec_int_title">Due livelli di eleganza</h2>
            <!-- Aggiunto data-i18n -->
            <p data-i18n="sec_int_desc">Spazi luminosi e accoglienti pensati per il benessere</p>
        </div>

        <div class="spaces-grid reveal">
            <div class="space-card">
                <!-- Aggiunto data-i18n -->
                <h3><i class="fas fa-level-up-alt"></i> <span data-i18n="floor_upper">Piano Rialzato</span></h3>
                <!-- Aggiunto data-i18n -->
                <p class="level-subtitle" data-i18n="level_street">Livello stradale</p>
                <ul class="room-list">
                    <li><i class="fas fa-bed"></i> <span data-i18n="room_std">Camera con letto matrimoniale standard</span></li>
                    <li><i class="fas fa-bed"></i> <span data-i18n="room_french">Camera matrimoniale con letto francese</span></li>
                    <li><i class="fas fa-bed"></i> <span data-i18n="room_single">Camera con letto singolo</span></li>
                    <li><i class="fas fa-bath"></i> <span data-i18n="room_bath">Bagno completo</span></li>
                </ul>
            </div>
            <div class="space-card">
                <!-- Aggiunto data-i18n -->
                <h3><i class="fas fa-level-down-alt"></i> <span data-i18n="floor_lower">Piano inferiore</span></h3>
                <!-- Aggiunto data-i18n -->
                <p class="level-subtitle" data-i18n="level_garden">Livello giardino</p>
                <ul class="room-list">
                    <li><i class="fas fa-couch"></i> <span data-i18n="room_living">Living open space con cucina</span></li>
                    <li><i class="fas fa-bed"></i> <span data-i18n="room_std_lower">Camera con letto matrimoniale standard</span></li>
                    <li><i class="fas fa-bath"></i> <span data-i18n="room_bath">Bagno completo</span></li>
                    <li><i class="fas fa-box"></i> <span data-i18n="room_storage">Ripostiglio lavanderia</span></li>
                    <li><i class="fas fa-umbrella-beach"></i> <span data-i18n="room_garden">Giardino con pergolato</span></li>
                </ul>
            </div>
        </div>
    </section>

    <!-- NEW SECTION: DESCRIZIONE -->
    <section class="description-highlight reveal" id="esperienza">
        <div class="desc-content">
            <i class="fas fa-quote-left desc-quote"></i>
            <!-- Aggiunto data-i18n -->
            <h2 style="font-family: 'Playfair Display'; font-size: 2.5rem; margin-bottom: 2rem; color: var(--charcoal);" data-i18n="exp_title">L'Oasi di Relax</h2>
            <!-- Paragrafo dinamico -->
            <p class="desc-text dynamic-text" data-key="exp_desc">Villa Gaia Ã¨ una casa indipendente di 130 mq, situata in una posizione di rara bellezza a Santa Maria di Leuca. Qui, dove il Mar Ionio e il Mar Adriatico si abbracciano, troverete un'oasi di pace assoluta. La proprietÃ  Ã¨ stata pensata per garantire la massima privacy e tranquillitÃ : spazi interni luminosi e accoglienti si aprono su un giardino privato, ideale per godersi il relax lontano dal caos, immersi nella quiete della natura salentina.</p>
            
            <div class="desc-features">
                <!-- Aggiunto data-i18n -->
                <div class="desc-feat-item">
                    <i class="fas fa-home"></i>
                    <span data-i18n="feat_indep">Casa Indipendente</span>
                </div>
                <div class="desc-feat-item">
                    <i class="fas fa-water"></i>
                    <span data-i18n="feat_seas">Due Mari</span>
                </div>
                <div class="desc-feat-item">
                    <i class="fas fa-leaf"></i>
                    <span data-i18n="feat_privacy">Privacy Totale</span>
                </div>
            </div>
        </div>
    </section>

    <section class="tariffe" id="tariffe">
        <div class="section-header reveal">
            <!-- Aggiunto data-i18n -->
            <span class="section-subtitle-lg" data-i18n="sec_book">Prenotazione</span>
            <h2 class="section-title" data-i18n="sec_cal_title">Calendario & Tariffe</h2>
            <p data-i18n="sec_cal_desc">Seleziona le date per verificare la disponibilitÃ  e calcolare il preventivo</p>
        </div>

        <div class="calendar-luxury reveal">
            <div class="calendar-header">
                <button class="calendar-btn" onclick="changeMonth(-1)" aria-label="Mese precedente"><i class="fas fa-chevron-left"></i></button>
                <!-- Aggiunto data-i18n -->
                <div class="calendar-title" id="currentMonth" style="font-family: 'Playfair Display'; font-size: 1.5rem;"></div>
                <button class="calendar-btn" onclick="changeMonth(1)" aria-label="Mese successivo"><i class="fas fa-chevron-right"></i></button>
            </div>
            
            <div class="calendar-grid" id="calendarGrid">
                <!-- Headers generated by JS -->
            </div>
        </div>

        <!-- MODIFIED SELECTION INFO BOX -->
        <div class="selection-info reveal" id="selectionInfo" style="display: none;">
            <div class="selection-dates">
                <div class="date-box">
                    <!-- Aggiunto data-i18n -->
                    <div class="date-label" data-i18n="checkin">Check-in</div>
                    <!-- Aggiunto data-i18n -->
                    <div class="date-value" id="displayCheckin">-</div>
                </div>
                <div class="date-nights" id="displayNights">0 NOTTI</div>
                <div class="date-box">
                    <!-- Aggiunto data-i18n -->
                    <div class="date-label" data-i18n="checkout">Check-out</div>
                    <!-- Aggiunto data-i18n -->
                    <div class="date-value" id="displayCheckout">-</div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; margin: 2rem 0;">
                <div class="form-group">
                    <!-- Aggiunto data-i18n -->
                    <label><i class="fas fa-users"></i> <span data-i18n="label_adults">Adulti (tassati)</span></label>
                    <select id="numGuests" onchange="updateGuests()">
                        <!-- Aggiunto data-i18n -->
                        <option value="8" selected>8 adulti</option>
                        <option value="7">7 adulti</option>
                        <option value="6">6 adulti</option>
                        <option value="5">5 adulti</option>
                        <option value="4">4 adulti</option>
                    </select>
                </div>
                <div class="form-group">
                    <!-- Aggiunto data-i18n -->
                    <label><i class="fas fa-child"></i> <span data-i18n="label_minors">Minori di 18 anni</span></label>
                    <input type="number" id="numMinors" min="0" max="8" value="0" onchange="updateMinors()">
                </div>
            </div>

            <!-- RIEPILOGO COSTI MIGLIORATO -->
            <div class="price-breakdown">
                <!-- Aggiunto data-i18n -->
                <div class="price-row"><span data-i18n="row_stay">Soggiorno</span> <span id="detailNights">0 notti</span></div>
                <!-- Aggiunto data-i18n -->
                <div class="price-row"><span data-i18n="row_base">Alloggio base</span> <span id="detailAccommodation">â‚¬0</span></div>
                
                <!-- Pulizia esplicitata -->
                <div class="price-row">
                    <span><i class="fas fa-broom" style="color: var(--gold); margin-right: 8px;"></i> <span data-i18n="row_clean">Pulizia finale (una tantum)</span> 
                    <span>â‚¬100</span>
                </div>

                <!-- NUOVA RIGA BIANCHERIA -->
                <div class="price-row">
                    <span><i class="fas fa-tshirt" style="color: var(--gold); margin-right: 8px;"></i> <span data-i18n="row_linen">Biancheria (Lenzuola + 3 Asciugamani)</span> 
                    <span id="detailLinen">â‚¬0</span>
                </div>

                <!-- Aggiunto data-i18n -->
                <div class="price-row discount" id="discountRow" style="display: none;">
                    <span>Sconto gruppo <span id="discountPerc"></span></span>
                    <span id="detailDiscount">-â‚¬0</span>
                </div>
                
                <div class="price-row total">
                    <!-- Aggiunto data-i18n -->
                    <span data-i18n="row_total">TOTALE DA PAGARE</span>
                    <span id="detailTotal">â‚¬0</span>
                </div>

                <!-- RIGA CAPARRA -->
                <div class="price-row deposit-row" style="margin-top: 1rem; display: none;" id="depositRow">
                    <div style="display: flex; flex-direction: column;">
                        <span data-i18n="row_deposit">CAPARRA (30%)</span>
                        <!-- Aggiunto data-i18n -->
                        <span class="deposit-note" data-i18n="deposit_note">Da versare tramite bonifico per confermare. Valida 48h.</span>
                    </div>
                    <span id="detailDeposit">â‚¬0</span>
                </div>

                
                <div class="tax-note">
                    <i class="fas fa-info-circle"></i> <span data-i18n="tax-note">Tassa soggiorno â‚¬2/adulto/notte (da pagare in loco): <span id="detailTax">â‚¬0</span></span>
                </div>
            </div>

            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <button onclick="resetSelection()" class="btn-primary" style="border-color: var(--charcoal); color: var(--charcoal);">
                    <i class="fas fa-undo"></i> <span data-i18n="btn_reset">Annulla</span>
                </button>
                <a href="#contatti" onclick="toggleMenu()" class="btn-secondary" style="background: var(--charcoal); color: var(--white); border-color: var(--charcoal);">
                    <!-- Aggiunto data-i18n -->
                    <span data-i18n="btn_book">Richiedi Prenotazione</span> <i class="fas fa-arrow-right" style="margin-left: 0.5rem;"></i>
                </a>
            </div>
        </div>
    </section>

    <section class="dark-section" id="galleria">
        <div class="section-header reveal">
            <!-- Aggiunto data-i18n -->
            <span class="section-subtitle-lg" data-i18n="sec_gallery">Galleria</span>
            <h2 class="section-title" data-i18n="sec_gallery_title">Gli ambienti</h2>
        </div>
        <div class="gallery-grid reveal">
            <div class="gallery-item">
                <img src="https://picsum.photos/seed/villagaia-living/800/800" alt="Living">
                    <div class="gallery-overlay"><i class="fas fa-expand"></i></div>
                </div>
                <div class="gallery-item">
                    <img src="https://picsum.photos/seed/villagaia-bedroom/800/1600" alt="Camera">
                        <div class="gallery-overlay"><i class="fas fa-expand"></i></div>
                    </div>
                <div class="gallery-item">
                    <img src="https://picsum.photos/seed/villagaia-pool/800/800" alt="Esterno">
                        <div class="gallery-overlay"><i class="fas fa-expand"></i></div>
                    </div>
        </div>
    </section>

    <!-- NEW SECTION: RECENSIONI -->
    <section class="reviews-section" id="recensioni">
        <div class="section-header reveal">
            <!-- Aggiunto data-i18n -->
            <span class="section-subtitle-lg" data-i18n="sec_reviews">Opinioni</span>
            <h2 class="section-title" data-i18n="sec_reviews_title">Dicono di Noi</h2>
            <!-- Aggiunto data-i18n -->
            <p data-i18n="sec_reviews_desc">Le esperienze degli ospiti che hanno scelto Villa Gaia</p>
        </div>
        <div class="reviews-grid reveal">
            <!-- Recensione 1 -->
            <div class="review-card">
                <div class="review-stars">
                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                </div>
                <!-- Aggiunto data-i18n -->
                <p class="review-text dynamic-text" data-key="rev1">
                    "Una vacanza da sogno. La villa Ã¨ ancora piÃ¹ bella delle foto, pulitissima e dotata di tutti i confort. La posizione Ã¨ strategica: vicinissima al mare ma immersa nel silenzio. Torneremo sicuramente l'anno prossimo!"
                </p>
                <div class="review-author">
                    <div class="review-avatar">MR</div>
                    <div class="review-info">
                        <h4>Marco R.</h4>
                            <span data-i18n="loc_milano">Milano</span>
                    </div>
                </div>
            </div>

            <!-- Recensione 2 -->
            <div class="review-card">
                <div class="review-stars">
                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                </div>
                <!-- Aggiunto data-i18n -->
                <p class="review-text dynamic-text" data-key="rev2">
                    "Abbiamo trascorso una settimana fantastica con la famiglia. I bambini hanno potuto giocare liberamente nel giardino recintato e noi ci siamo goduti gli aperitivi al tramonto. Gestione super ospitale e disponibile."
                </p>
                <div class="review-author">
                    <div class="review-avatar">EB</div>
                    <div class="review-info">
                        <h4 data-i18n="loc_roma">Roma</h4>
                            <span data-i18n="loc_rome">Roma</span>
                    </div>
                </div>
            </div>

            <!-- Recensione 3 -->
            <div class="review-card">
                <div class="review-stars">
                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                </div>
                <!-- Aggiunto data-i18n -->
                <p class="review-text dynamic-text" data-key="rev3">
                    "Semplicemente perfetto. Il design curato, la posizione ideale per visitare entrambe le coste e la pace assoluta. Un'oasi di relax che consiglio a chi cerca qualitÃ  e tranquillitÃ  nel Salento."
                </p>
                <div class="review-author">
                    <div class="review-avatar">GL</div>
                    <div class="review-info">
                        <!-- Aggiunto data-i18n -->
                        <h4>Giuseppe L.</h4>
                            <span data-i18n="loc_torino">Torino</span>
                        </div>
                </div>
            </div>
        </div>
    </section>

    <section class="dark-section" id="condizioni">
        <div class="section-header reveal">
            <!-- Aggiunto data-i18n -->
            <span class="section-subtitle-lg" data-i18n="sec_terms">Informazioni</span>
            <h2 class="section-title" data-i18n="sec_terms_title">Condizioni di Soggiorno</h2>
        </div>

        <div class="terms-grid reveal">
            <!-- Box 1: Prenotazioni -->
            <div class="terms-card">
                <!-- Aggiunto data-i18n -->
                <h3><i class="fas fa-file-contract"></i> <span data-i18n="terms_booking">PRENOTAZIONI</span></h3>
                <div class="terms-highlight">
                    <strong style="color: var(--gold);">24h gratuita</strong>
                    <!-- Aggiunto data-i18n -->
                    <p style="font-size: 0.85rem; margin-top: 0.5rem;">Disdetta gratuita entro 72 ore dalla conferma della prenotazione.</p>
                </div>
                <!-- Aggiunto data-i18n -->
                <ul>
                    <li class="dynamic-text" data-key="terms_book_1">L'ospite versa il 30% del costo totale tramite bonifico bancario al momento della prenotazione.</li>
                    <!-- Aggiunto data-i18n -->
                    <li class="dynamic-text" data-key="terms_book_2">Disdetta gratuita entro 72 ore dalla conferma della prenotazione.</li>
                    <!-- Aggiunto data-i18n -->
                    <li class="dynamic-text" data-key="terms_book_3">Pagamento del saldo entro 7 giorni prima dell'arrivo.</li>
                </ul>
            </div>

            <!-- Box 2: Check-in/Check-out -->
            <div class="terms-card">
                <h3><i class="fas fa-clock"></i> CHECK-IN / CHECK-OUT</h3>
                <ul>
                    <!-- Aggiunto data-i18n -->
                    <li class="dynamic-text" data-key="terms_check_1">Check-in: dalle ore 15:00 alle ore 18:00.</li>
                    <!-- Aggiunto data-i18n -->
                    <li class="dynamic-text" data-key="terms_check_2">Check-out: entro le ore 10:30.</li>
                    <!-- Aggiunto data-i18n -->
                    <li class="dynamic-text" data-key="terms_check_3">Late check-in: su richiesta e previo accordo, con supplemento.</li>
                </ul>
            </div>

            <!-- Box 3: Bambini e Servizi Inclusi -->
            <div class="terms-card">
                <!-- Aggiunto data-i18n -->
                <h3><i class="fas fa-baby"></i> <span data-i18n="terms_services">TARIFFE BAMBINI E SERVIZI INCLUSI</span></h3>
                <ul>
                    <!-- Aggiunto data-i18n -->
                    <li class="dynamic-text" data-key="terms_kids">Bambini fino a 3 anni soggiornano gratuitamente (letto e pasti inclusi).</li>
                    <!-- Aggiunto data-i18n -->
                    <li class="dynamic-text" data-key="terms_wifi">Wi-Fi illimitato disponibile gratuitamente in tutta la struttura.</li>
                    <!-- Aggiunto data-i18n -->
                    <li class="dynamic-text" data-key="terms_parking">Parcheggio privato per 3 auto.</li>
                </ul>
            </div>

            <!-- Box 4: Regole -->
            <div class="terms-card">
                <h3><i class="fas fa-ban"></i> <span data-i18n="terms_rules">REGOLE DELLA STRUTTURA</span></h3>
                <ul>
                    <!-- Aggiunto data-i18n -->
                    <li class="dynamic-text" data-key="terms_rule_1">Ãˆ vietato fumare all'interno della struttura.</li>
                    <!-- Aggiunto data-i18n -->
                    <li class="dynamic-text" data-key="terms_rule_2">Gli animali domestici sono ammessi (previa comunicazione).</li>
                    <li class="dynamic-text" data-key="terms_rule_3">Non Ã¨ consentito organizzare feste, eventi o riunioni rumorose.</li>
                    <!-- Aggiunto data-i18n -->
                    <li class="dynamic-text" data-key="terms_rule_4">Dalle ore 24:00 alle ore 07:00 Ã¨ fatto divieto assoluto di produrre rumori molesti o parlare ad alta voce, al fine di garantire la quiete altrui.</li>
                </ul>
            </div>
        </div>
    </section>

    <section class="about" id="contatti" style="background: var(--light-gray);">
        <div class="section-header reveal">
            <span class="section-subtitle-lg" data-i18n="sec_contact">Contatti</span>
            <h2 class="section-title" data-i18n="sec_contact_title">Richiedi Informazioni</h2>
            <!-- Aggiunto data-i18n -->
            <p class="desc-text dynamic-text" data-i18n="sec_contact_desc">Risposta garantita entro 24 ore</p>
        </div>

        <div class="contact-grid-container reveal" style="max-width: 1200px; margin: 0 auto;">
            <!-- FORM -->
            <div class="contact-form">
                <form id="bookingForm">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem;">
                        <div class="form-group">
                            <!-- Aggiunto data-i18n -->
                            <label class="dynamic-text" data-i18n="lbl_name">Nome</label>
                            <input type="text" required placeholder="Il tuo nome">
                        </div>
                        <div class="form-group">
                            <!-- Aggiunto data-i18n -->
                            <label class="dynamic-text" data-i18n="lbl_surname">Cognome</label>
                            <input type="text" required placeholder="Il tuo cognome">
                        </div>
                    </div>
                    <div class="form-group">
                        <!-- Aggiunto data-i18n -->
                        <label class="dynamic-text" data-i18n="lbl_email">Email</label>
                        <input type="email" required placeholder="email@example.com">
                    </div>
                    <div class="form-group">
                        <!-- Aggiunto data-i18n -->
                        <label class="dynamic-text" data-i18n="lbl_message">Messaggio</label>
                        <textarea rows="4" placeholder="Scrivi la tua richiesta..." id="formMessage"></textarea>
                    </div>
                    <button type="submit" class="submit-btn">
                        <!-- Aggiunto data-i18n -->
                        <span class="dynamic-text" data-i18n="btn_submit">Invia Messaggio</span> <i class="fas fa-paper-plane" style="margin-left: 0.5rem;"></i>
                    </button>
                </form>
            </div>

            <!-- INFO + MAPPA -->
            <div class="contact-info-box">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <p style="font-size: 1.2rem; margin-bottom: 0.5rem; display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <i class="fas fa-phone" style="color: var(--gold);"></i> 
                        <a href="tel:+393202144987" style="color: var(--charcoal); font-weight: 600;">+39 320 214 4987</a>
                        </p>
                    <p style="font-size: 1.2rem; margin-bottom: 1.5rem;">
                        <i class="fas fa-envelope" style="color: var(--gold);"></i> 
                        gabrielepiccinni@gmail.com
                    </p>
                </div>
                <!-- GOOGLE MAPS -->
                <div style="width: 100%; height: 300px; border-radius: 8px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                    <iframe 
                        src="https://maps.google.com/maps?q=39.800964,18.351757&hl=it&z=15&output=embed" 
                        width="100%" 
                        height="100%" 
                        style="border:0;" 
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">Villa <span>Gaia</span></div>
            <p style="color: rgba(255,255,255,0.6); max-width: 400px; margin: 0 auto 2rem; line-height:1.8;">
                Luxury Estate nel cuore del Salento<br>
                CIN: IT075019C200103077
            </p>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="tel:+393202144987"><i class="fas fa-phone"></i></a>
                <a href="mailto:gabrielepiccinni@gmail.com"><i class="fas fa-envelope"></i></a>
            </div>
            <div class="footer-bottom">
                <p class="dynamic-text" data-i18n="footer_copy">&copy; 2026 Villa Gaia Salento Experience. Tutti i diritti riservati.</p>
            </div>
        </div>

        <!-- CONTATORE VISITATORI -->
        <div class="visitor-counter">
            <div class="visitor-dot"></div>
            <!-- Aggiunto data-i18n -->
            <span id="visitorText" style="color: #2ecc71;">Caricamento...</span>
        </div>
    </footer>

    <script>
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            let icon = 'fa-info-circle';
            if(type === 'error') icon = 'fa-exclamation-circle';
            if (type === 'success') icon = 'fa-check-circle';
            toast.innerHTML = `<i class="fas ${icon}"></i> <span>${message}</span>`;
            container.appendChild(toast);
            setTimeout(() => {
                toast.style.animation = 'fadeOut 0.4s ease forwards';
                toast.addEventListener('animationend', () => toast.remove());
            }, 3500);
        }

        const navbar = document.getElementById('navbar');
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('nav-links');
        let ticking = false;

        window.addEventListener('scroll', () => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    if (window.scrollY > 50) {
                        navbar.classList.add('scrolled');
                    } else {
                        navbar.classList.remove('scrolled');
                    }
                    ticking = false;
                });
                ticking = true;
            }
        });

        function toggleMenu() {
            navLinks.classList.toggle('active');
            const icon = hamburger.querySelector('i');
            if(navLinks.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        }

        hamburger.addEventListener('click', toggleMenu);

        const observerOptions = { threshold: 0.1, rootMargin: "0px 0px -50px 0px" };
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);
        document.querySelectorAll('.reveal, .section-header').forEach((el) => observer.observe(el));

        // --- LINGUAGI SYSTEM ---
        /* Inserimento completi oggetto traduzioni */
        const translations = {
            it: {
                nav_villa: "La Villa",
                nav_spazi: "Gli Spazi",
                nav_esperienza: "L'Esperienza",
                nav_tariffe: "DisponibilitÃ ",
                nav_recensioni: "Recensioni",
                nav_condizioni: "Condizioni",
                nav_contatti: "Contatti",
                hero_subtitle: "Salento Experience",
                hero_title: "Villa Gaia",
                hero_text: "Un'oasi di relax nel cuore del Salento",
                btn_check: "Verifica DisponibilitÃ ",
                btn_discover: "Scopri la Villa",
                sec_prop: "La ProprietÃ ",
                sec_prop_title: "Una dimora esclusiva tra comfort e tranquillitÃ ",
                sec_prop_desc: "Situata in una tranquilla zona residenziale a soli 800 metri dal mare e dal centro di Leuca",
                about_title: "Il valore del relax: un rifugio di pace e serenitÃ ",
                desc_about1: "Villa Gaia Ã¨ stata concepita come un autentico rifugio dove il tempo sembra scorrere piÃ¹ lentamente. La posizione strategica garantisce la massima tranquillitÃ , mantenendo una comoda vicinanza a tutti i servizi.",
                desc_about2: "Il giardino terrazzato di 210 mq costituisce il vero cuore dell'esperienza: uno spazio verde privato dove godere delle serate salentine circondati dai profumi della macchia mediterranea.",
                sec_interni: "Gli Interni",
                sec_int_title: "Due livelli di eleganza",
                sec_int_desc: "Spazi luminosi e accoglienti pensati per il benessere",
                floor_upper: "Piano Rialzato",
                floor_lower: "Piano inferiore",
                level_street: "Livello stradale",
                level_garden: "Livello giardino",
                room_std: "Camera con letto matrimoniale standard",
                room_french: "Camera matrimoniale con letto francese",
                room_single: "Camera con letto singolo",
                room_bath: "Bagno completo",
                room_living: "Living open space con cucina",
                room_std_lower: "Camera con letto matrimoniale standard",
                room_storage: "Ripostiglio lavanderia",
                room_garden: "Giardino con pergolato",
                exp_title: "L'Oasi di Relax",
                exp_desc: "Villa Gaia Ã¨ una casa indipendente di 130 mq, situata in una posizione di rara bellezza a Santa Maria di Leuca. Qui, dove il Mar Ionio e il Mar Adriatico si abbracciano, troverete un'oasi di pace assoluta. La proprietÃ  Ã¨ stata pensata per garantire la massima privacy e tranquillitÃ : spazi interni luminosi e accoglienti si aprono su un giardino privato, ideale per godersi il relax lontano dal caos, immersi nella quiete della natura salentina.",
                feat_indep: "Casa Indipendente",
                feat_seas: "Due Mari",
                feat_privacy: "Privacy Totale",
                sec_book: "Prenotazione",
                sec_cal_title: "Calendario & Tariffe",
                sec_cal_desc: "Seleziona le date per verificare la disponibilitÃ  e calcolare il preventivo",
                row_stay: "Soggiorno",
                row_base: "Alloggio base",
                row_clean: "Pulizia finale (una tantum)",
                row_linen: "Biancheria (Lenzuola + 3 Asciugamani)",
                row_discount: "Sconto gruppo",
                row_total: "TOTALE DA PAGARE",
                row_deposit: "CAPARRA (30%)",
                deposit_note: "Da versare tramite bonifico per confermare. Valida 48h.",
                tax_note: "Tassa soggiorno â‚¬2/adulto/notte (da pagare in loco):",
                btn_check: "Verifica DisponibilitÃ ",
                btn_discover: "Scopri la Villa"
            },
            en: {
                nav_villa: "The Villa",
                nav_spazi: "The Spaces",
                nav_esperienza: "The Experience",
                nav_tariffe: "Availability",
                nav_recensioni: "Reviews",
                nav_condizioni: "Conditions",
                nav_contatti: "Contacts",
                hero_subtitle: "Salento Experience",
                hero_title: "Villa Gaia",
                hero_text: "An oasis of relaxation in the heart of Salento",
                btn_check: "Check Availability",
                btn_discover: "Discover the Villa",
                sec_prop: "The Property",
                sec_prop_title: "An exclusive home between comfort & tranquility",
                sec_prop_desc: "Located in a quiet residential area just 800 meters from the sea and the center of Leuca",
                about_title: "The value of relaxation: a haven of peace and serenity",
                desc_about1: "Villa Gaia was conceived as an authentic haven where time seems to flow more slowly. The strategic location guarantees maximum tranquility while maintaining convenient proximity to all services.",
                desc_about2: "The 210 sqm terraced garden constitutes the very heart of experience: a private green space to enjoy Salentine evenings surrounded by scents of maquis. <br>",
                floor_upper: "Ground Floor",
                floor_lower: "Lower Floor",
                level_street: "Street Level",
                level_garden: "Garden Level",
                room_std: "Standard Double Room",
                room_french: "French Bed Double",
                room_single: "Single Room",
                room_bath: "Full Bathroom",
                room_living: "Open Space Living with Kitchen",
                room_std_lower: "Standard Double Room",
                room_storage: "Laundry Room",
                room_garden: "Garden with Pergola",
                exp_title: "The Relaxation Oasis",
                exp_desc: "Villa Gaia Ã¨ una casa indipendente di 130 mq, situata in una posizione di rara bellezza a Santa Maria di Leuca. Qui, dove il Mar Ionio e il Mar Adriatico si abbracciano, troverete un'oasi di pace assoluta. La proprietÃ  Ã¨ stata pensata per garantire la massima privacy e tranquillitÃ : spazi interni luminosi e accoglienti si aprono su un giardino privato, ideale per godersi il relax lontano dal caos, immersi nella quiete della natura salentina.",
                feat_indep: "Independent House",
                feat_seas: "Two Seas",
                feat_privacy: "Total Privacy",
                sec_book: "Booking",
                sec_cal_title: "Calendar & Rates",
                sec_cal_desc: "Select dates to check availability and calculate quote",
                row_stay: "Stay",
                row_base: "Base Accommodation",
                row_clean: "Final Cleaning (One-off)",
                row_linen: "Linen (Sheets + 3 Towels)",
                row_discount: "Group Discount",
                row_total: "TOTAL TO PAY",
                row_deposit: "DEPOSIT (30%)",
                deposit_note: "Pay by bank transfer to confirm. Valid for 48h.",
                tax_note: "Tourist tax â‚¬2/adult/night (to be paid locally):",
                btn_check: "Check Availability",
                btn_discover: "Discover",
                footer_copy: "&copy; 2026 Villa Gaia Salento Experience. All rights reserved."
            },
            fr: {
                nav_villa: "La Villa",
                nav_spazi: "Les Espaces",
                nav_esperienza: "L'ExpÃ©rience",
                nav_tariffe: "DisponibilitÃ©",
                nav_recensioni: "Avis",
                nav_condizioni: "Conditions",
                nav_contatti: "Contacts",
                hero_subtitle: "ExpÃ©rience Salente",
                hero_title: "Villa Gaia",
                hero_text: "Une oasis de dÃ©tente au cÅ“ur du Salento",
                btn_check: "VÃ©rifier disponibilitÃ©",
                btn_discover: "DÃ©couvrir la Villa",
                sec_prop: "La PropriÃ©tÃ©",
                sec_prop_title: "Une demeure exclusive entre confort et tranquilitÃ©",
                sec_prop_desc: "SituÃ©e dans une zone rÃ©sidentielle calme Ã  seulement 800 mÃ¨tres de la mer et du centre de Leuca",
                about_title: "La valeur du repos: un havre de paix et de sÃ©rÃ©nitÃ©",
                desc_about1: "Villa Gaia a Ã©tÃ© conÃ§ue comme un vÃ©ritable refuge oÃ¹ le temps semble s'Ã©couler plus lentement. La position stratÃ©gique garantit la tranquillitÃ© maximale tout en gardant une proximitÃ© avec tous les services.",
                desc_about2: "Le jardin terrassÃ© de 210 mÂ² constitue le vÃ©ritable cÅ“ur de l'expÃ©rience: un espace vert privÃ© pour profiter des soirÃ©es salentoises entourÃ©s par les parfums de la maquis mÃ©diterranÃ©enne. <br>",

                floor_upper: "Ã‰tage de plain-pied",
                floor_lower: "Sous-sol",
                level_street: "Niveau de la rue",
                level_garden: "Niveau jardin",
                room_std: "Chambre double standard",
                room_french: "Chambre lit franÃ§ais",
                room_single: "Chambre simple",
                room_bath: "Salle de bain complÃ¨te",
                room_living: "Salon style ouvert avec cuisine",
                room_std_lower: "Chambre double standard",
                room_storage: "Buanderie",
                room_garden: "Jardin avec pergola",
                exp_title: "L'Oasis de DÃ©tente",
                exp_desc: "Villa Gaia est une maison indÃ©pendante de 130 mÂ², situÃ©e dans un lieu d'une rare beautÃ© Ã  Santa Maria di Leuca. Ici, oÃ¹ la mer Ionio et la mer Adriatico s'embrassent, vous trouverez un oasis de paix absolue. La propriÃ©tÃ© a Ã©tÃ© pensÃ©e pour garantir une confidentialitÃ© et une tranquillitÃ© maximales: des espaces interni lumineux et accueillants s'ouvrent sur un jardin privÃ©, idÃ©al pour profiter du repos loin du chaos, immergÃ© dans la quiÃ©tÃ© de la nature salentine.",
                feat_indep: "Maison IndÃ©pendante",
                feat_seas: "Deux Mers",
                feat_privacy: "IntimitÃ© Totale",
                sec_book: "RÃ©servation",
                sec_cal_title: "Calendrier & Tarifs",
                sec_cal_desc: "SÃ©lectionnez les dates pour vÃ©rifier la disponibilitÃ© et calculer le devis",
                row_stay: "SÃ©jour",
                row_base: "HÃ©bergement de base",
                row_clean: "Nettoyage final (unique)",
                row_linen: "Linge (Draps + 3 Serviettes)",
                row_discount: "Remise de groupe",
                row_total: "TOTAL Ã€ PAYER",
                row_deposit: "ACOMPT (30%)",
                deposit_note: "Payer par virement pour confirmer. Valide 48h.",
                tax_note: "Tourist tax â‚¬2/adulte/nuit (Ã  payer sur place):",
                btn_check: "VÃ©rifier DisponibilitÃ©",
                btn_discover: "RÃ©server",
                footer_copy: "&copy; 2026 Villa Gaia Salento Experience. Tous droits rÃ©servÃ©s."
            },
            de: {
                nav_villa: "Die Villa",
                nav_spazi: "Die RÃ¤ume",
                nav_esperienza: "Das Erlebnis",
                nav_tariffe: "VerfÃ¼gbarkeit",
                nav_recensioni: "Bewertungen",
                nav_condizioni: "Bedingungen",
                nav_contatti: "Kontakt",
                hero_subtitle: "Salento Erlebnis",
                hero_title: "Villa Gaia",
                hero_text: "Ein Ruheoase im Herzen des Salento",
                btn_check: "VerfÃ¼gbarkeit prÃ¼fen",
                btn_discover: "Die Villa entdecken",
                sec_prop: "Die Immobilie",
                sec_prop_title: "Eine exklusive Unterkunft zwischen Komfort und Ruhe",
                sec_prop_desc: "Gelegen in einer ruhigen Wohnlage nur 800 Meter vom Meer und dem Zentrum von Leuca.",
                about_title: "Der Wert der Entspannung: ein RÃ¼ckzugsort des Friedens",
                desc_about1: "Villa Gaia wurde als autentischer RÃ¼ckzugsort konzipiert. Die strategische Position garantiert maximale Ruhe und bewahrt eine kurze Distanz zu allen Diensten.",
                desc_about2: "Der 210 mÂ² groÃŸe Terrasse ist der wahre Kern der Erfahrung: ein privater GrÃ¼nbereich um Salento-Abende genieÃŸen.",

                floor_upper: "Erdgeschoss",
                floor_lower: "Untergeschoss",
                level_street: "StraÃŸenniveau",
                level_garden: "Gartenebenebene",
                room_std: "Doppelzimmer (Standardbetten)",
                room_french: "Doppelbett (FranzÃ¶sisches Bett)",
                room_single: "Einzelzimmer",
                room_bath: "Kompletes Badzimmer",
                room_living: "Wohnzimmer offen mit KÃ¼che",
                room_std_lower: "Doppelzimmer (Standardbetten)",
                room_storage: "Waschraum",
                room_garden: "Garten mit Pergola",
                exp_title: "Der RÃ¼ckzug der Entspannung",
                exp_desc: "Villa Gaia ist ein 130 mÂ² groÃŸes, unabhÃ¤ngiges Haus, gelegen an einem Ort seltener SchÃ¶nheit in Santa Maria di Leuca. Hier, wo das ionische Meer und das adriatische Meer sich berÃ¼hren, finden Sie eine Oase absoluten des Friedens. Die Immobilie wurde geplant, um maximale Privatheit und Ruhe zu gewÃ¤hrleisten: helle, einladene und heimische InnenrÃ¤ume Ã¶ffnen sich auf einen privaten Garten, ideal fÃ¼r den Erholung fern vom LÃ¤rm in der Stille der Natur des Salento.",
                feat_indep: "UnabhÃ¤ngiges Haus",
                feat_seas: "Zwei Meere",
                feat_privacy: "Totale PrivatsphÃ¤re",
                sec_book: "Buchung",
                sec_cal_title: "Kalender & Preise",
                sec_cal_desc: "WÃ¤hlen Sie die Daten zur ÃœberprÃ¼fung der VerfÃ¼gbarkeit und Berechnung des Angebots",
                row_stay: "Aufenthalt",
                row_base: "Unterkunft",
                row_clean: "Endreinigung (einmalig)",
                row_linen: "WÃ¤sche (BettwÃ¤sche + 3 HandtÃ¼cher)",
                row_discount: "Gruppenrabatt",
                row_total: "GESAMT ZU ZAHLEN",
                row_deposit: "ANZAHLUNG (30%)",
                deposit_note: "Zahlung per Ãœberweisung. GÃ¼ltig 48h.",
                tax_note: "Steuertax â‚¬2/Erwachs/Nacht (ortsabhÃ¤ngig vor Ort):",
                btn_check: "VerfÃ¼gbarkeit prÃ¼fen",
                btn_discover: "Haus entdecken",
                footer_copy: "&copy; 2026 Villa Gaia Salento Experience. Alle Rechte vorbehalten."
            }
        };

        let currentLanguage = 'it';

        function changeLanguage(lang) {
            currentLanguage = lang;
            
            // Aggiorna la bandiera corrente
            const flags = {
                'it': 'ðŸ‡®ðŸ‡¹',
                'en': 'ðŸ‡¬ðŸ‡§',
                'fr': 'ðŸ‡«ðŸ‡·',
                'de': 'ðŸ‡©ðŸ‡ª'
            };
            document.getElementById('current-flag').textContent = flags[lang];
            
            // Chiudi il dropdown
            document.getElementById('langDropdown').classList.remove('active');

            // Aggiorna i testi
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(translations[lang] && translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });

            // Aggiorna i testi dinamici
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if(translations[lang] && translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
        }

        function toggleDropdown() {
            const dropdown = document.getElementById('langDropdown');
            dropdown.classList.toggle('active');
        }

        // Close dropdown when clicking outside
        window.onclick = function(event) {
            if (!event.target.closest('.language-switcher')) {
                document.getElementById('langDropdown').classList.remove('active');
                if(navLinks.classList.contains('active')) {
                    toggleMenu();
                }
            }
        };

        const monthNames = ["Gennaio", "Febbraio", "Marzo", "Aprile", "Maggio", "Giugno", "Luglio", "Agosto", "Settembre", "Ottobre", "Novembre", "Dicembre"];
        let currentDate = new Date();
        let checkinDate = null;
        let checkoutDate = null;
        let numGuests = 8;
        let numMinors = 0;

        function isClosedMonth(month) { return [10, 11, 0, 1, 2].includes(month); }

        function getPriceForDate(date) {
            const month = date.getMonth();
            const day = date.getDate();
            if (isClosedMonth(month)) return 0;

            if (month === 3) return 120;
            if (month === 4) return 120;
            if (month === 5) return day <= 20 ? 160 : 200;
            if (month === 6) return day <= 12 ? 220 : 280;
            if (month === 7) return day <= 9 ? 320 : day <= 23 ? 400 : 280;
            if (month === 8) return day <= 6 ? 240 : day <= 20 ? 200 : 160;
            if (month === 9) return 120;
            return 0;
        }

        function getDiscountRate(guests) {
            if (guests == 7) return 0.10;
            if (guests == 6) return 0.15;
            if (guests == 5) return 0.20;
            if (guests == 4) return 0.25;
            return 0;
        }

        function generateCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const isClosed = isClosedMonth(month);
            document.getElementById('currentMonth').textContent = monthNames[month] + ' ' + year + (isClosed ? ' (Chiuso)' : '');
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            let startingDay = firstDay.getDay();
            if(startingDay === 0) startingDay = 7;
            const totalDays = lastDay.getDate();

            let html = ['Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab', 'Dom'].map(d => `<div class="calendar-day-header">${d}</div>`).join('');

            for (let i = 1; i < startingDay; i++) html += '<div class="calendar-day disabled"></div>';

            const today = new Date();
            today.setHours(0,0,0,0);

            for (let day = 1; day <= totalDays; day++) {
                const date = new Date(year, month, day);
                const price = getPriceForDate(date);
                const isPast = date < today;
                let classes = 'calendar-day';
                let content = '';

                if (isPast) {
                    classes += ' disabled';
                    content = `<div class="calendar-day-number">${day}</div>`;
                } else if (isClosed) {
                    classes += ' closed';
                    content = `<div class="calendar-day-number">${day}</div><div class="calendar-day-price">Chiuso</div>`;
                } else {
                    if (checkinDate && checkoutDate) {
                        if (date.getTime() === checkinDate.getTime()) classes += ' checkin';
                        else if (date.getTime() === checkoutDate.getTime()) classes += ' checkout';
                        else if (date > checkinDate && date < checkoutDate) classes += ' in-range';
                    } else if (checkinDate && date.getTime() === checkinDate.getTime()) classes += ' selected';
                    content = `<div class="calendar-day-number">${day}</div><div class="calendar-day-price">â‚¬${price}</div>`;
                }
                const clickHandler = (isClosed || isPast) ? '' : `onclick="selectDate(${year}, ${month}, ${day})"`;
                html += `<div class="${classes}" ${clickHandler}>${content}</div>`;
            }
            document.getElementById('calendarGrid').innerHTML = html;
        }

        function selectDate(year, month, day) {
            if (isClosedMonth(month)) { showToast('Struttura chiusa nei mesi invernali.', 'error'); return; }
            const selectedDate = new Date(year, month, day);
            const today = new Date(); today.setHours(0,0,0,0);
            if (selectedDate < today) return;

            if (!checkinDate || (checkinDate && checkoutDate)) {
                checkinDate = selectedDate; checkoutDate = null;
                document.getElementById('selectionInfo').style.display = 'none';
            } else if (checkinDate && !checkoutDate) {
                if (selectedDate <= checkinDate) { showToast('Seleziona data post check-in', 'error'); return; }
                // Verifica se tra le due date non superano mesi di chiusura
                let tempDate = new Date(checkinDate); tempDate.setDate(tempDate.getDate() + 1);
                let hasClosedMonth = false;
                while (tempDate < selectedDate) {
                    if (isClosedMonth(tempDate.getMonth())) { hasClosedMonth = true; break; }
                    tempDate.setDate(tempDate.getDate() + 1);
                }
                if (hasClosedMonth) { showToast('Non si puÃ² prenotare attraverso mesi di chiusura.', 'error'); return; }
                checkoutDate = selectedDate; calculateTotal();
            }
            generateCalendar();
        }

        function updateGuests() {
            numGuests = parseInt(document.getElementById('numGuests').value);
            const minorInput = document.getElementById('numMinors');
            if (numMinors > numGuests) { numMinors = numGuests; minorInput.value = numMinors; }
            minorInput.max = numGuests; if (checkinDate && checkoutDate) calculateTotal();
        }

        function updateMinors() {
            let val = parseInt(document.getElementById('numMinors').value) || 0;
            if (val < 0) val = 0;
            if (val > numGuests) { showToast('Minori non possono superare ospiti totali', 'error'); val = numGuests; }
            numMinors = val; document.getElementById('numMinors').value = numMinors;
            if (checkinDate && checkoutDate) calculateTotal();
        }

        function calculateTotal() {
            if (!checkinDate || !checkoutDate) return;
            const diffTime = Math.abs(checkoutDate - checkinDate);
            const nights = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            if (nights <= 0) return;

            let totalAccommodation = 0; let tempDate = new Date(checkinDate);
            for (let i = 0; i < nights; i++) {
                const dayPrice = getPriceForDate(tempDate);
                if (dayPrice === 0) return;
                totalAccommodation += dayPrice;
                tempDate.setDate(tempDate.getDate() + 1);
            }

            const discountRate = getDiscountRate(numGuests);
            const discountAmount = Math.round(totalAccommodation * discountRate);
            const afterDiscount = totalAccommodation - discountAmount;
            const touristTax = nights * numGuests * 2;
            
            const cleaning = 100;
            
            // Calcolo costi accessori (Biancheria)
            const linenCostPerPerson = 15;
            const totalGuests = numGuests + numMinors;
            const linenTotal = linenCostPerPerson * totalGuests;

            const total = afterDiscount + cleaning + linenTotal;

            const depositAmount = Math.round(total * 0.30);

            document.getElementById('selectionInfo').style.display = 'block';
            document.getElementById('displayCheckin').textContent = checkinDate.getDate() + ' ' + monthNames[checkinDate.getMonth()];
            document.getElementById('displayCheckout').textContent = checkoutDate.getDate() + ' ' + monthNames[checkoutDate.getMonth()];
            document.getElementById('displayNights').textContent = nights + ' ' + (nights.toLocaleString('it-IT') + ' NOTTI');
            
            document.getElementById('detailNights').textContent = `${nights} notti`;
            document.getElementById('detailAccommodation').textContent = 'â‚¬' + totalAccommodation;
            
            // Aggiorna Biancheria
            document.getElementById('detailLinen').textContent = `â‚¬${linenTotal} (${totalGuests}x)`;
            
            const discountRow = document.getElementById('discountRow');
            if (discountRate > 0) {
                discountRow.style.display = 'flex';
                document.getElementById('discountPerc').textContent = '-' + (discountRate * 100) + '%';
                document.getElementById('detailDiscount').textContent = '-â‚¬' + discountAmount;
            } else { discountRow.style.display = 'none'; }
            
            // Aggiornamento totale
            document.getElementById('detailTotal').textContent = 'â‚¬' + total;
            document.getElementById('detailTax').textContent = 'â‚¬' + touristTax;

            // Mostra e aggiorna riga Caparra
            const depositRow = document.getElementById('depositRow');
            if (total > 0) {
                depositRow.style.display = 'flex';
                document.getElementById('detailDeposit').textContent = 'â‚¬' + depositAmount;
            } else {
                depositRow.style.display = 'none';
            }
            
            setTimeout(() => { document.getElementById('selectionInfo').scrollIntoView({ behavior: 'smooth', block: 'center' }); }, 100);
        }

        function resetSelection() {
            checkinDate = null; checkoutDate = null; numMinors = 0;
            document.getElementById('numMinors').value = 0;
            document.getElementById('selectionInfo').style.display = 'none';
            generateCalendar();
        }

        function changeMonth(delta) { currentDate.setMonth(currentDate.getMonth() + delta); generateCalendar(); }

        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            let msg = document.getElementById('formMessage').value;
            if (checkinDate && checkoutDate) { msg += `\n\n[Interesse dal: ${checkinDate.toLocaleDateString()} al: ${checkoutDate.toLocaleDateString()}]`; }
            const btn = this.querySelector('button'); const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Invio...';
            setTimeout(() => { showToast('Messaggio inviato con successo! Ti risponderemo presto.', 'success'); this.reset(); btn.innerHTML = originalText; }, 1500);
        });

        // --- VISITOR COUNTER SCRIPT ---
        document.addEventListener('DOMContentLoaded', () => {
            const visitorText = document.getElementById('visitorText');
            
            // 1. Simuliamo un numero totale di visitatori persistente (LocalStorage)
            let totalVisitors = localStorage.getItem('vg_visitors');
            if (!totalVisitors) {
                totalVisitors = 12450;
            } else {
                // Incrementa il contatore ogni volta che qualcuno ricarica la pagina
                totalVisitors = parseInt(totalVisitors) + 1;
            }
            localStorage.setItem('vg_visitors', totalVisitors);

            // 2. Generiamo un numero casuale di utenti attualmente online (1-5)
            const onlineVisitors = Math.floor(Math.random() * 5) + 1;

            // 3. Formattiamo il numero con i punti migliaia (es. 12.450)
            const formattedTotal = totalVisitors.toLocaleString('it-IT');

            visitorText.innerHTML = `<i class="fas fa-eye" style="color:#2ecc71; margin-right:5px;"></i> <strong>${formattedTotal}</strong> visitatori totali â€¢ <strong>${onlineVisitors}</strong> online`;
        });

        generateCalendar();
    </script>
</body>
</html>
